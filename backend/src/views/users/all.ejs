<%- include("../partials/header", { pageTitle: "Tous les utilisateurs", unreadCount, unreadMessages, user }) %>

<div class="container my-4">
  <div class="row">
    <div class="col-12">
      <h2 class="mb-4">
        <i class="bi bi-people"></i> Tous les utilisateurs
      </h2>

      <hr class="mb-4">

      <div class="row g-3">
        <% (users || []).forEach(u => { %>
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <a href="/profiles/<%= u.id %>" class="link-primary text-decoration-none">
                    <%= u.displayName %>
                  </a>
                </h5>
                <p class="card-text text-muted small">
                  <i class="bi bi-envelope"></i> <%= u.email %>
                </p>

                <div class="d-flex gap-2 mt-3">
                  <form method="POST" action="/users/<%= u.id %>/follow" class="flex-fill">
                    <button type="submit" class="btn btn-outline-primary btn-sm w-100">
                      <i class="bi bi-person-plus"></i> Follow
                    </button>
                  </form>

                  <form method="POST" action="/friends/request/<%= u.id %>" class="flex-fill">
                    <button type="submit" class="btn btn-primary btn-sm w-100">
                      <i class="bi bi-person-heart"></i> Ami
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</div>

<%- include("../partials/footer") %>
